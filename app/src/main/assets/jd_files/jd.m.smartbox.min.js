(function(e){if(typeof module!=="undefined"&&typeof exports==="object"){module.exports=e}else if(typeof define==="function"&&(define.amd||define.cmd)){define(e)}else{if(!window.JD){window.JD={M:{}}}window.JD.M={smartbox:e()}}})(function(){var e=[],t=null;var o={type:"GET",success:l,error:l,complete:l,load:l,context:null,global:true,retryCount:0,globalLock:0,lockCallback:null,cgiKey:false,degrade:false,xhr:function(){return new window.XMLHttpRequest},dataType:"json",accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},crossDomain:false,needCookies:false,timeout:8,processData:true,cache:false,wqunit:/[?&]_wqunit_=1/.test(location.search),setReportUrl:""};var s=window;if(!s.callbackName){var r=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];for(var a=0;a<3;a++){for(var n=0;n<26;n++){r.push(r[a*26+n]+r[n])}}s.callbackName=r}s.ajaxCount=s.ajaxCount||0;var i="";var c=d("sceneval")||(/(\.|^)m\.jd\.com/.test(window.location.hostname)?2:0);function l(){}function d(e,t){var o=arguments[1]||window.location.search,s=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),r=o.substr(o.indexOf("?")+1).match(s);return r!=null?r[2]:""}function h(e){if(e.processData&&e.data&&typeof e.data!="string"){if(e.type.toLowerCase()=="post"&&e.jsonpCallback){return}e.data=m(e.data)}if(e.data&&(!e.type||e.type.toUpperCase()=="GET"))e.url=p(e.url,e.data),e.data=undefined}function m(e){var t=[];t.add=function(e,t){this.push(encodeURIComponent(e)+"="+encodeURIComponent(t))};u(t,e);return t.join("&").replace(/%20/g,"+")}function u(e,t){for(var o in t){e.add(o,t[o])}}function p(e,t){if(t=="")return e;return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function f(e){if(!e||typeof e!="string"){return e}e=e.replace(/^\s+|\s+$/g,"");if(!e)return e;return JSON.parse(e)}function g(e){var t=e.jsonpCallback,o=(typeof t=="function"?t():t)||"jsonpCBK"+s.callbackName[s.ajaxCount++%s.callbackName.length],r=document.createElement("script"),a,n={abort:l},c,l=function(t){d=1;console.log(e.url,"timeout");w(null,"timeout",n,e)},d=0;e.callbackName=o;r.charset=e.charset||"utf-8";r.onload=r.onerror=function(t,o){clearTimeout(c);if(d){console.log("timeout");return false}if(t.type=="error"){console.log(e.url,o||t.type||"error");w(null,"error",n,e)}else if(!a){w(null,t.type,n,e);window.onerror("","","","",{stack:"servererror:"+i})}else{if(a[0]&&a[0].retcode==-1&&a[0].message=="没有找到"&&a[0].unitReload==1){e.wqunit=false;e.url=e.urlbak;b(e)}else{v(a[0],n,e)}}a=undefined;r.parentNode.removeChild(r)};window[o]=function(){a=arguments};e.url=e.url.replace(/\?(.+)=\?/,"?$1="+o);r.src=e.url;document.head.appendChild(r);if(e.timeout>0)c=setTimeout(function(){l("timeout")},e.timeout*1e3);return n}function v(e,t,o){var s=o.context,r="success";o.success.call(s,e,o,r,t);k(r,t,o)}function w(e,t,o,s,r){if(s.retryCount<=0||s.type.toLowerCase()=="post"){y(e,t,o,s);return}if(["error","parsererror"].indexOf(t)>=0){y(e,t,o,s);return}setTimeout(function(){s.url=s.url.replace(/(&)?(_|g_tk|g_ty|callback)=\w+/g,"");console.log("start retry,"+s);s.retryCount--;b(s)},0)}function y(e,t,o,s){var r=s.context;console.log(s.url,t,e);if(s.degrade){console.log("降级",s.degrade);s.isDegrade=1;s.success.call(r,s.degrade,s)}var a={timeout:8e3,error:5e3,load:3020,abort:5001,parsererror:3021};s.error.call(r,t,a[t]||9e3,s,e,o);k(t,o,s)}function k(e,t,o){var s=o.context;o.complete.call(s,e,t)}function A(e){var t=e.jsonpCallback,o=(typeof t=="function"?t():t)||"jsonpCBK"+s.callbackName[s.ajaxCount++%s.callbackName.length],r,a,n={abort:i},i=function(t){console.log(e.url,"timeout");w(null,"timeout",n,e)};window[o]=function(){clearTimeout(r);a=arguments;var t=document.getElementById("ajaxPostForm");t&&t.remove();var o=document.getElementById("ajaxPostIframe");o&&o.remove();v(a[0],n,e)};e.data.callback=o;S(e,e.isFile);if(e.timeout>0)r=setTimeout(function(){window[o]=l;i("timeout")},e.timeout*1e3)}function S(e,t){var o=document.getElementById("ajaxPostForm");var s=document.getElementById("ajaxPostIframe");if(!o){o=document.createElement("form");o.id="ajaxPostForm";s=document.createElement("iframe");s.height=0;s.width=0;s.id=s.name="ajaxPostIframe";o.style.display="none";document.body.appendChild(s);document.body.appendChild(o)}var r=L("input",o);for(var a=0,n=r.length;a<n;++a){o.removeChild(r[a])}for(var i in e.data){var c=document.createElement("input");c.setAttribute("type","hidden");c.setAttribute("name",i);c.setAttribute("value",e.data[i]);o.appendChild(c)}o.target="ajaxPostIframe";o.action=e.url;o.method="POST";o.enctype=t?"multipart/form-data":"application/x-www-form-urlencoded";o.submit()}function b(e){if(!e)return false;var t=e;for(var s in o){typeof t[s]=="undefined"&&(t[s]=o[s])}t.url=t.url.replace(/^http:/,"");if(t.setReportUrl&&typeof t.setReportUrl=="function"){i=t.setReportUrl();!i&&(i=t.url)}else{i=window.CGI302ReportKeepUrl?t.url:t.url.replace(/\?.*/,"")}if(!t.crossDomain)t.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(t.url)&&RegExp.$2!=window.location.host;if(t.crossDomain&&t.needCookies)t.xhrFields={withCredentials:true};if(!t.url)t.url=window.location.toString();h(t);var r=t.dataType,a=/\?.+=\?/.test(t.url);if(a)r="jsonp";if(t.cache===false||(!e||e.cache!==true)&&("script"==r||"jsonp"==r))t.url=p(t.url,"_="+Date.now());if(c)t.url=p(t.url,"sceneval="+c);if("jsonp"==r||t.wqunit){if(!a){t.urlbak=t.url;t.url=p(t.url,t.jsonp?t.jsonp+"=?":t.jsonp===false?"":"callback=?")}return g(t)}if(t.type.toLowerCase()=="post"&&t.jsonpCallback){return A(t)}var n=t.accepts[r],d={},m=function(e,t){d[e.toLowerCase()]=[e,t]},u=/^([\w-]+:)\/\//.test(t.url)?RegExp.$1:window.location.protocol,y=t.xhr(),k=y.setRequestHeader,S;if(!t.crossDomain)m("X-Requested-With","XMLHttpRequest");m("Accept",n||"*/*");if(n=t.mimeType||n){if(n.indexOf(",")>-1)n=n.split(",",2)[0];y.overrideMimeType&&y.overrideMimeType(n)}if(t.contentType||t.contentType!==false&&t.data&&t.type.toUpperCase()!="GET")m("Content-Type",t.contentType||"application/x-www-form-urlencoded");if(t.headers)for(name in t.headers)m(name,t.headers[name]);y.setRequestHeader=m;y.onreadystatechange=function(){if(y.readyState==4){y.onreadystatechange=l;clearTimeout(S);var e,o=false;if(y.status>=200&&y.status<300||y.status==304||y.status==0&&u=="file:"){e=y.responseText;try{if(r=="script")(1,eval)(e);else if(r=="xml")e=y.responseXML;else if(r=="json")e=/^\s*$/.test(e)?null:f(e)}catch(e){o=e}if(o)w(o,"parsererror",y,t);else v(e,y,t)}else{console.log("ajax error",y);w(y.statusText||null,"load",y,t)}}};var b="async"in t?t.async:true;y.open(t.type,t.url,b,t.username,t.password);if(t.xhrFields)for(name in t.xhrFields)y[name]=t.xhrFields[name];for(name in d)k.apply(y,d[name]);if(t.timeout>0)S=setTimeout(function(){y.onreadystatechange=l;y.abort();w(null,"timeout",y,t)},t.timeout*1e3);y.send(t.data?t.data:null);return y}function C(e,t,o){if(!e||!t||!o){return}if(e instanceof Array){for(var s=0,r=e.length;s<r;s++){C(e[s],t,o)}return}if(t instanceof Array){for(var s=0,r=t.length;s<r;s++){C(e,t[s],o)}return}window.__allHandlers=window.__allHandlers||{};window.__Hcounter=window.__Hcounter||1;function a(e,t,o,s){e.__hids=e.__hids||[];var r="h"+window.__Hcounter++;e.__hids.push(r);window.__allHandlers[r]={type:t,handler:o,wrapper:s}}function n(e,t){return function(){return e.apply(t,arguments)}}if(window.addEventListener){var i=n(o,e);a(e,t,o,i);e.addEventListener(t,i,false)}else if(window.attachEvent){var i=n(o,e);a(e,t,o,i);e.attachEvent("on"+t,i)}else{e["on"+t]=o}}function x(){var e=arguments[0]||{},t=1,o=arguments.length,s;if(typeof e!="object"&&typeof e!="function")e={};for(;t<o;t++)if((s=arguments[t])!=null)for(var r in s){var a=s[r];if(e===a)continue;if(a!==undefined)e[r]=a}return e}function j(){var e=document.documentElement,t=document.body,o=e&&e.scrollLeft||t&&t.scrollLeft||window.pageXOffset||0,s=e&&e.scrollTop||t&&t.scrollTop||window.pageYOffset||0;return[o,s]}function T(e,t){R(e,t,"add")}function M(e,t){R(e,t,"remove")}function H(e,t){if(!e||!t)return null;var o=(typeof e=="object"?e.className:e).split(" ");for(var s=0,r=o.length;s<r;s++){if(t==o[s]){return t}}return null}function R(e,t,o){if(!e){return}var s=function(e,t,o){if(!e){return}var s=e.className,r=s?s.split(" "):[];if(o=="add"){if(!H(s,t)){r.push(t);e.className=r.join(" ")}}else if(o=="remove"){var a=[];for(var n=0,i=r.length;n<i;n++){if(t!=r[n]&&" "!=r[n]){a.push(r[n])}}e.className=a.join(" ")}};if(typeof e=="string"){var r=e.split(",");for(var a=0,n=r.length;a<n;a++){if(r[a]){s(B(r[a]),t,o)}}}else if(e instanceof Array){for(var a=0,n=e.length;a<n;a++){if(e[a]){s(e[a],t,o)}}}else{s(e,t,o)}}function B(e){return typeof e=="string"?document.getElementById(e):e}function E(e,t){if(!e){return}var o;if(!window["_loadCss"]||window["_loadCss"].indexOf(e)<0){o=document.createElement("link");o.setAttribute("type","text/css");o.setAttribute("rel","stylesheet");o.setAttribute("href",e);o.setAttribute("id","loadCss"+Math.random());document.getElementsByTagName("head")[0].appendChild(o);window["_loadCss"]?window["_loadCss"]+="|"+e:window["_loadCss"]="|"+e}o&&typeof t=="function"&&(o.onload=t);return true}function O(e,t){var o=t||"\\s";var s=new RegExp("(^"+o+"*)|("+o+"*$)","g");return e.replace(s,"")}function D(e){return typeof e!="string"?"":e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;").replace(/ /g,"&nbsp;")}function _(e,t){try{window.localStorage.setItem(e,t)}catch(e){}}function N(e,t){var o=window.localStorage.getItem(e);t&&t(o)}function U(e){return window.localStorage.removeItem(e)}function F(e){var t=new RegExp("(^| )"+e+"(?:=([^;]*))?(;|$)"),o=document.cookie.match(t);if(!o||!o[2]){return""}var s=o[2];try{if(/(%[0-9A-F]{2}){2,}/.test(s)){return decodeURIComponent(s)}else{return unescape(s)}}catch(e){return unescape(s)}}function K(e,t){if(/^\#/.test(e)){return B(e.replace(/^\#/,""))}return t?t.querySelector(e):document.querySelector(e)}function L(e,t){return t?t.querySelectorAll(e):document.querySelectorAll(e)}function q(e,t){if(e){if(t!="none"){var o=e.getAttribute("hide");if(o==1){t="none"}}e.style.display=t||"block"}}function Y(e,t,o,s,r){var a=~e.indexOf("?")?"&":"?",n=e.indexOf(a+t+"=");if(n>=0){var i=new RegExp("(\\"+a+t+"=[^&#]*)");if(r){e=e.replace(i,a+t+"="+o)}else{e=e.replace(i,"$1"+(s?s:"")+o)}}else{var c=e.indexOf("#");if(c>-1){var l=e.split("#"),d=l[0],h=l[1];e=d+a+t+"="+o+"#"+h}else{e+=a+t+"="+o}}return e}function I(o){var s;var r=0;if(r!==undefined&&Math.floor(Math.random()*10)>r)return false;var a="//wq.jd.com/webmonitor/collect/biz.json?contents=";if(o instanceof Array){s=[];for(var n=0;n<o.length;n++){s.push(o[n].bizid+"|"+o[n].operation+"|"+o[n].result+"|"+o[n].source+"|"+encodeURIComponent(String(o[n].message).replace(/,/g," "))+(window.traceid?"|"+traceid:""))}s=s.join(",")}else{s=o.bizid+"|"+o.operation+"|"+o.result+"|"+o.source+"|"+encodeURIComponent(String(o.message).replace(/,/g," "))+(window.traceid?"|"+traceid:"");if(o&&o.notCombo){(new Image).src=a+s+"&t="+Math.random();return false}}e.push(s);if(!t){t=setTimeout(function(){var o=new Image;o.src=a+e.join(",")+"&t="+Math.random();e=[];t=null},1e3)}}var z={set:_,get:N,remove:U};var J="searchhistory_3";var P={status:0,oldKey:"",curTheam:"searchland",hotwordsCache:null,isFucus:false,onShow:false,onShowHah:false,firstClickReport:false,inpageshow:false,dtimer:null,xstorageUrl:"//wq.360buyimg.com/js/common/dest/m.xstorage.client.min.js?t=201809121400",searchUrl:"//so.m.jd.com/ware/search.action?keyword={#keyword#}&searchFrom={#sf#}&sf={#ssf#}&as={#as#}",searchShopUrl:"//so.m.jd.com/shop/searchShop.action?keyword={#keyword#}&searchFrom={#sf#}&sf={#ssf#}&as={#as#}",tipsApi:"//wq.jd.com/bases/searchdropdown/getdropdown",hotKeyApi:"//wq.jd.com/bases/searchhotword/GetHotWords",drakApi:"//wq.jd.com/bases/searchpromptwords/searchpromptwords",doms:{},inputInfo:{needReplace:false,left:0,top:0,width:0,height:0},cgiMonitor:{smartboxTimer:null,timeout:5e3},opt:{deley:300,showCb:null,hideCb:null,keyInput:null,clickCb:null,css:"//wq.360buyimg.com/fd/h5/wxsq_dev/search/css/search_m_smartbox.min_fcfc60d7.css",sf:"search",smartboxBlock:"",inputDomid:"",onlyGenDoms:false,isLogin:false,initReplace:true,defaultSm:true,shortCutShow:false,cancelBtnShow:true,initHideSbtn:false,initKeyword:"",drakKey:"",drakText:"",drakLink:"",mManualReport:false,searchRd:"",hisRd:"",hotRd:"",darkRd:"",smartRd:"",smartShopRd:""}};P.init=function(e){if(this._status===1){console.warn("smartbox duplicate initialization, please check your code again.")}if(window.closeSearchEntrance_m){return}this.initParam(e);this.initTpl();if(!this.opt.onlyGenDoms){this.bindEvent()}this._status=1};P.initParam=function(e){e&&x(this.opt,e);var t=F("_mkjdcnsl");if(t){if(t.charAt(0)=="0"){this.opt.shortCutShow=false;this.opt.cancelBtnShow=false;this.opt.initHideSbtn=true}}this.pageUrl=location.href.replace(/\?.*/,"");if(e.inputDomid){this.opt.inputDomid=K("#"+this.opt.inputDomid)}this.opt.css&&E(this.opt.css);this.curTheam=this.opt.sf=="home"?"home_normal":"searchland";this.loadXstorageClient()};P.loadXstorageClient=function(){b({url:this.xstorageUrl,data:{},type:"get",dataType:"script",cache:true,success:function(){var e=new CrossStorageClient;z={set:function(t,o){e.onConnect().then(function(){return e.set(t,o)}).catch(function(t){e.close()})},get:function(t,o){e.onConnect().then(function(){return e.get(t)}).then(function(e){o&&o(e)}).catch(function(t){e.close()})},remove:function(t){e.onConnect().then(function(){return e.del(t)}).catch(function(t){e.close()})}}}})};P.initTpl=function(){if(this.opt.smartboxBlock){this.opt.smartboxBlock=K("#"+this.opt.smartboxBlock)}else{var e=document.createElement("div");e.id="smartboxBlock";document.body.appendChild(e);this.opt.smartboxBlock=e}this.opt.smartboxBlock.className="search-land"+(this.opt.sf=="home"?" main-page":"");this.opt.smartboxBlock.style.display=this.opt.defaultSm?"block":"none";this.opt.smartboxBlock.innerHTML=this.child_indextpl();this.doms.kwObj=K("#msKeyWord");this.doms.searchBtn=K("#msSearchBtn");this.doms.clearBtn=K("#msSearchClearBtn");this.doms.cancelBtn=K("#msCancelBtn");this.doms.msContentWraper=K("#msContentWraper");this.doms.msHistory=K("#msHistory");this.doms.msHistoryTags=K("#msHistoryTags");this.doms.msHistoryDel=K("#msHistoryDel");this.doms.msClearToast=K("#msClearToast");this.doms.msClearFloor=K("#msClearFloor");this.doms.msClearCancel=K("#msClearCancel");this.doms.msClearSure=K("#msClearSure");this.doms.msHotSearch=K("#msHotSearch");this.doms.msHotSearchReflash=K("#msHotSearchReflash");this.doms.msHotSearchTags=K("#msHotSearchTags");this.doms.msKeys=K("#msKeys");this.doms.msShortcutLogin=K("#msShortcutLogin");this.doms.msShortcutMenu=K("#msShortcutMenu");this.doms.msShortcut=K("#msShortcut");this.doms.msHeaderMask=K("#msHeaderMask");this.doms.msSearchBox=K("#msSearchBox");this.oldKey=O(this.doms.kwObj.value);if(this.opt.drakText){this.doms.kwObj.setAttribute("placeholder",this.opt.drakText);!this.opt.initKeyword&&this.exposeDark()}else{this.loadDrakText()}this.opt.initReplace&&this.inputReplace();this.showShortCut(this.opt.shortCutShow);this.showCancelBtn(this.opt.cancelBtnShow)};P.inputReplace=function(){if(this.inputInfo.needReplace){}};P.showShortCut=function(e){if(e){this.showSearchBtn(false);if(this.opt.sf=="home"&&!this.opt.isLogin){q(this.doms.msShortcutLogin,"")}else{q(this.doms.msShortcutMenu,"")}}else{this.showSearchBtn(!this.opt.initHideSbtn);q(this.doms.msShortcutLogin,"none");q(this.doms.msShortcutMenu,"none");q(this.doms.msShortcut,"none")}};P.showSearchBtn=function(e){if(e){q(this.doms.searchBtn,"");this.doms.msSearchBox.style.marginRight="52px"}else{q(this.doms.searchBtn,"none");this.doms.msSearchBox.style.marginRight="32px"}};P.showCancelBtn=function(e){if(e){q(this.doms.cancelBtn,"")}else{q(this.doms.cancelBtn,"none")}};P.bindEvent=function(){var e=this;C(this.doms.kwObj,"focus",function(){if(e.isFucus)return;e.isFucus=true;e.loadSuggest();var t="";if(!e.onShow){switch(e.opt.sf){case"home":t="MHome_BSearch";break;case"search":t="MProductList_Search";break;case"pinpai":t="MSearchBrand_Search";break;case"category":t="MFilter_Search";break}}var o=O(e.doms.kwObj.value);if(o==""){e.showHisAndHot()}else{e.hideHisAndHot();e.doms.clearBtn&&q(e.doms.clearBtn,"")}e.inputReplace(false);e.showCancelBtn(true);e.showSearchBtn(true);e.opt.showCb&&e.opt.showCb();if(t){e.firstClickReport=true;e.sendMping(t);window.setTimeout(function(){e.firstClickReport=false},300)}});C(this.doms.kwObj,"blur",function(){e.isFucus=false;window.setTimeout(function(){e.doms.clearBtn&&q(e.doms.clearBtn,"none")},0)});C(e.doms.kwObj,"click",function(){var t=O(e.doms.kwObj.value);e.clickEvent(1,0,t,e.firstClickReport);var o=false;if(!t&&e.opt.drakKey){t=e.opt.drakKey;o=true}var s={event_param:t+"_"+(o?"1":"0")+"_"+e.getOriginalSearch()};!e.firstClickReport&&e.sendMping("MSearch_Search",s)});var t=e.doms.kwObj.parentNode;while(t&&t!==document.body&&t.tagName.toUpperCase()!=="FORM"){t=t.parentNode}C(e.doms.kwObj,"keydown",function(t){if(t.keyCode=="13"){e.doms.kwObj.blur();var o=O(e.doms.kwObj.value),s=e.opt.searchRd,r=false;if(o==""){if(e.opt.drakLink){var a=decodeURIComponent(d("keyword",e.opt.drakLink)||"");var n=e.opt.drakLink;if(e.opt.darkRd){n=Y(n,"ptag",e.opt.darkRd)}r=true;e.jumpToTarget(n,a,"MSearch_TrueLines",true);return}else if(e.opt.drakKey){o=O(e.opt.drakKey);s=e.opt.darkRd;var i={event_param:e.opt.drakText+"_"+o+"_2"};r=true;e.sendMping("MSearch_TrueLines",i)}else{return}}e.clickEvent(2,0,o);var c=e.genSearchUrl(o,s,11,1);if(c){var l={event_param:o+"_"+e.getOriginalSearch()+"_"+(r?"1":"0"),event_level:"2"};e.jumpToTarget(c,o,"MSearch_Searchthi",r,l)}}});if(e.doms.searchBtn){C(e.doms.searchBtn,"click",function(t){var o=O(e.doms.kwObj.value),s=e.opt.searchRd,r=false;if(o==""){if(e.opt.drakLink){var a=decodeURIComponent(d("keyword",e.drakInfo.link)||""),n=e.drakInfo.link;if(e.opt.darkRd){n=Y(n,"ptag",e.opt.darkRd)}r=true;e.jumpToTarget(n,a,"MSearch_TrueLines",true);return}else if(e.opt.drakText&&e.opt.drakKey){o=e.opt.drakKey;s=e.opt.darkRd;r=true;var i={event_param:e.opt.drakText+"_"+o+"_2"};r=true;e.sendMping("MSearch_TrueLines",i)}}e.clickEvent(3,0,o);var c=e.genSearchUrl(o,s,11,1);if(c){e.jumpToTarget(c,o,"MSearch_SearchButton",r)}})}if(e.doms.cancelBtn){C(e.doms.cancelBtn,"click",function(t){if(e.onShow){e.doms.kwObj.blur();e.doms.kwObj.value=e.opt.initKeyword||"";e.hideWrap();e.opt.hideCb&&e.opt.hideCb();e.clickEvent(4,0,"");e.sendMping("MSearch_Back")}else{if(e.opt.sf=="home"){e.sendMping("MSearchFrame_Category",{event_level:"1"});window.setTimeout(function(){location.href="//so.m.jd.com/category/all.html?searchFrom=bysearchbox"},200)}else{history.back()}}})}if(e.doms.clearBtn){C(e.doms.clearBtn,"click",function(t){e.doms.kwObj.value="";e.doms.kwObj.focus();e.opt.keyInput&&e.opt.keyInput("");t.preventDefault();e.showHisAndHot();q(e.doms.clearBtn,"none");e.clickEvent(5,0,"");e.sendMping("MSearch_Clear",{event_param:""});e.opt.drakText&&e.exposeDark()})}if(e.doms.msHistoryDel){C(e.doms.msHistoryDel,"click",function(t){q(e.doms.msClearToast,"-webkit-box");e.clickEvent(7,0,"");e.sendMping("MSearch_ClearHistory")});C(e.doms.msClearFloor,"click",function(t){q(e.doms.msClearToast,"none");e.clickEvent(8,0,"")});C(e.doms.msClearCancel,"click",function(t){q(e.doms.msClearToast,"none");e.clickEvent(9,0,"");e.sendMping("MSearch_ClearHistoryCancel")});C(e.doms.msClearSure,"click",function(t){e.clearHistoryKeywords();q(e.doms.msClearToast,"none");e.clickEvent(10,0,"");e.sendMping("MSearch_ClearHistoryConfirm")})}C(e.doms.msShortcutLogin,"click",function(){e.sendMping("MSearchFrame_Login");window.setTimeout(function(){location.href="//home.m.jd.com/myJd/home.action"},200)});C(e.doms.msShortcutMenu,"click",function(t){if(e.opt.sf=="home"){e.sendMping("MSearchFrame_PersonalCenter");window.setTimeout(function(){location.href="//home.m.jd.com/myJd/home.action"},200)}else{var o=e.doms.msShortcutMenu.getAttribute("show");if(o=="1"){q(e.doms.msShortcut,"none");q(e.doms.msHeaderMask,"none");e.doms.msShortcutMenu.setAttribute("show","0")}else{q(e.doms.msShortcut,"");q(e.doms.msHeaderMask,"");e.doms.msShortcutMenu.setAttribute("show","1")}}});C(e.doms.msHeaderMask,"click",function(t){q(e.doms.msHeaderMask,"none");q(e.doms.msShortcut,"none");e.doms.msShortcutMenu.setAttribute("show","0")});e.setSuggestCheck();e.bindHisEvent();e.bindSmkeyEvent();C(window,"scroll",function(){if(document.activeElement&&document.activeElement===e.doms.kwObj&&j()[1]>0){e.doms.kwObj.blur()}});C(window,"pageshow",function(){if(e.inpageshow){e.doms.kwObj.blur();e.doms.kwObj.value=e.opt.initKeyword||"";e.hideWrap();e.opt.hideCb&&e.opt.hideCb()}e.inpageshow=true})};P.setSuggestCheck=function(){var e=P;if(e.isFucus){var t=O(e.doms.kwObj.value);if(t!=e.oldKey){e.oldKey=t;e.loadSuggest();e.opt.keyInput&&e.opt.keyInput(t)}if(t!=""){q(e.doms.clearBtn,"");if(e.onShowHah){e.hideHisAndHot()}}else{q(e.doms.clearBtn,"none");if(!e.onShowHah){e.showHisAndHot()}}}C(e.doms.kwObj,"input",o);C(e.doms.kwObj,"propertychange",o);function o(){e.dtimer&&window.clearTimeout(e.dtimer);e.dtimer=window.setTimeout(function(){var t=O(e.doms.kwObj.value);if(t!=e.oldKey){e.oldKey=t;e.loadSuggest();e.opt.keyInput&&e.opt.keyInput(t)}if(t!=""){q(e.doms.clearBtn,"");if(e.onShowHah){e.hideHisAndHot()}}else{q(e.doms.clearBtn,"none");if(!e.onShowHah){e.showHisAndHot()}e.opt.drakText&&e.exposeDark()}},e.opt.deley)}};P.loadSuggest=function(){var e=this;var t=O(e.doms.kwObj.value);if(!t||!e.isFucus){return}e.cgiMonitor.smartboxTimer=window.setTimeout(function(){try{I({bizid:"36",operation:"16",result:"0",source:"0",message:"m_smartbox api timeout:"+e.opt.sf})}catch(e){}},e.cgiMonitor.timeout);b({url:e.tipsApi,data:{terminal:"m",zip:1,key:t},type:"get",dataType:"jsonp",success:function(o){if(e.onShowHah)return;var s=[],r=0,a=0,n=[],i=[],c=new RegExp("("+t.replace(/([\+\*\.\?\|\^\(\)\{\}\[\]\/\\])/g,"\\$1")+")","g");if(o&&o.length>0){for(var l=0,d=o.length;l<d;++l){var h=o[l];if(h.version){e.version=h.version}else if(h.attachinfo){n=h.attachinfo}else{i.push(h)}}n.sort(function(e,t){return e.showorder-t.showorder});for(var l=0,d=n.length;l<d&&a<2;++l){var m=n[l];if(m.attachtype==0){s.push(e.child_shoptpl({keyword:m.searchquery,ind:++r}))}a++}for(var l=0,d=i.length;l<d;++l){var u=i[l];if(!u.key)continue;u.pos=l;if(u.bra){}else{u.keywordStr=u.key&&u.key.replace(c,'<span class="search_string">$1</span>');u.ind=++r;s.push(e.child_seltpl(u))}}}if(s.length>0){e.doms.msKeys.innerHTML=s.join("");e.showWrap(2)}var p={bizid:"36",operation:"15",result:"0",source:"0",message:"m_smartbox api loaded:"+e.opt.sf};if(s.length==0){p={bizid:"36",operation:"17",result:"0",source:"0",message:"m_smartbox api empty:"+e.opt.sf}}try{I(p)}catch(e){}},error:function(){try{I({bizid:"36",operation:"15",result:"1",source:"0",message:"m_smartbox api failed:"+e.opt.sf})}catch(e){}},complete:function(){e.cgiMonitor.smartboxTimer&&window.clearTimeout(e.cgiMonitor.smartboxTimer)},load:function(){e.cgiMonitor.smartboxTimer&&window.clearTimeout(e.cgiMonitor.smartboxTimer)}})};P.genSearchUrl=function(e,t,o,s){var r=this.searchUrl.replace("{#keyword#}",encodeURIComponent(e)).replace("{#sf#}",this.opt.sf).replace("{#ssf#}",o).replace("{#as#}",s);if(t){r+="&PTAG="+t}return r};P.genSearchShopUrl=function(e,t,o){var s=this.searchShopUrl.replace("{#keyword#}",encodeURIComponent(e)).replace("{#sf#}",this.opt.sf).replace("{#ssf#}",16).replace("{#as#}",o);if(t){s+="&PTAG="+t}return s};P.bindSmkeyEvent=function(){var e=this;C(e.doms.msKeys,"click",function(t){var o=t.target,s=o.getAttribute("key");while(!s&&o.tagName.toLowerCase!="li"){o=o.parentNode;s=o.getAttribute("key")}if(s){var r=o.getAttribute("ind"),a=o.getAttribute("mtype"),n=a=="shop",i=o.getAttribute("subind"),c=O(e.doms.kwObj.value),l=n?e.genSearchShopUrl(s,e.opt.smartShopRd,1):e.genSearchUrl(s,e.opt.smartRd,12,1);s=n?s+'"店铺"':s;var d=null;var h=null,m=e.getOriginalSearch();if(a=="key"){e.clickEvent(12,r,s);d="MSearch_SearchDropDownAssociationalWords";h={event_param:s+"_0"+"_"+c+"_"+r+"_"+m,event_level:"2"}}else if(a=="subkey"){e.clickEvent(13,r,s,i);d="MSearch_AssociationLabel";var u=o.getAttribute("assword"),p=o.innerHTML;h={event_param:i+"_"+c+"_"+u+"_"+r+"_"+p+"_"+m,event_level:"2"}}else if(n){e.clickEvent(14,r,s);d="MSearch_Shopsearch";h={event_param:s+"_"+m}}e.jumpToTarget(l,s,d,false,h)}})};P.bindHisEvent=function(){var e=this;C(e.doms.msHistoryTags,"click",function(t){var o=t.target;if(o.tagName.toLowerCase()=="a"){o=o.parentNode}var s=o.getAttribute("tourl"),r=o.getAttribute("ind");if(s){var a=decodeURIComponent(d("keyword",s)||"");if(/^(https?:)?\/\/so\.m\.jd\.com\/shop\//.test(s)){a+='"店铺"'}e.clickEvent(6,r,a);if(e.opt.hisRd){s=Y(s,"ptag",e.opt.hisRd)}s=Y(s,"sf",14);s=Y(s,"as",0);var n={event_param:a+"_"+r+"_"+e.getOriginalSearch(),event_level:"2"};e.jumpToTarget(s,a,"MSearch_HistoryRecords",false,n)}});C(e.doms.msHotSearchTags,"click",function(t){var o=t.target;if(o.tagName.toLowerCase()=="a"){o=o.parentNode}else if(o.tagName.toLowerCase()=="i"){o=o.parentNode.parentNode}var s=o.getAttribute("key"),r=o.getAttribute("ind"),a=e.genSearchUrl(s,e.opt.hotRd,15,0);e.clickEvent(11,r,s);var n={event_param:s+"_"+r+"_"+e.getOriginalSearch(),event_level:"2"};e.jumpToTarget(a,s,"MSearch_HotWords",false,n)})};P.getOriginalSearch=function(){var e="3";switch(this.opt.sf){case"home":e="1";break;case"category":e="2";break}return e};P.showHisAndHot=function(){var e=this;e.onShowHah=true;e.showWrap(1);e.initHistory();e.initHotList()};P.hideHisAndHot=function(){var e=this;e.onShowHah=false;e.showWrap(2)};P.initHistory=function(){var e=this;e.getHistoryKeywords(function(t){var o=[],s=t.length;for(var r=0;r<s;++r){var a=t[r];a.ind=r+1;o.push(e.child_histpl(a))}if(o.length>0){e.doms.msHistoryTags.innerHTML=o.join("");e.doms.msHistory.setAttribute("hide","0");q(e.doms.msHistory,e.onShowHah?"":"none")}else{e.doms.msHistory.setAttribute("hide","1");q(e.doms.msHistory,"none")}})};P.initHotList=function(){var e=this;if(e.hotwordsCache){e.fillHotList();return}b({url:e.hotKeyApi,data:{},type:"get",dataType:"jsonp",success:function(t){if(t.retcode!=0){return}e.hotwordsCache=t;e.fillHotList()}})};P.fillHotList=function(){var e=this,t=[],o=12,s=0;if(e.hotwordsCache.owner&&e.hotwordsCache.owner.length>0){for(var r=e.hotwordsCache.owner.length;s<r&&s<o;++s){var a=e.hotwordsCache.owner[s];t.push(e.child_hottpl({hotWord:a,ind:s+1}))}}if(s<o&&e.hotwordsCache.def&&e.hotwordsCache.def.length>0){for(var r=e.hotwordsCache.def.length;s<r&&s<o;++s){var a=e.hotwordsCache.def[s];t.push(e.child_hottpl({hotWord:a,ind:s+1}))}}if(t.length>0){e.doms.msHotSearchTags.innerHTML=t.join("");q(e.doms.msHotSearch,"")}};P.loadDrakText=function(){var e=this;b({url:e.drakApi,data:{},type:"get",dataType:"jsonp",success:function(t){if(t.retcode!=0){return}var o=t.searchwords;if(o&&o.length>0){var s=o[0];e.opt.drakText=s.showword;e.opt.drakKey=s.searchword;e.doms.kwObj.setAttribute("placeholder",e.opt.drakText);!e.opt.initKeyword&&e.exposeDark()}}})};P.showWrap=function(e){this.onShow=true;if(this.opt.defaultSm){q(this.doms.msContentWraper,"")}else{q(this.opt.smartboxBlock,"")}if(this.opt.shortCutShow){this.showShortCut(false)}if(e==1){q(this.doms.msKeys,"none");q(this.doms.msClearToast,"none");q(this.doms.msHistory,"");this.hotwordsCache&&q(this.doms.msHotSearch,"")}else{q(this.doms.msKeys,"");q(this.doms.msClearToast,"none");q(this.doms.msHistory,"none");q(this.doms.msHotSearch,"none")}if(this.opt.sf=="home"){this.changeTheam("")}};P.hideWrap=function(){this.onShow=false;if(this.opt.defaultSm){q(this.doms.msContentWraper,"none")}else{q(this.opt.smartboxBlock,"none")}if(this.opt.shortCutShow){this.showShortCut(true);this.showSearchBtn(false)}else{this.showSearchBtn(!this.opt.initHideSbtn)}this.showCancelBtn(this.opt.cancelBtnShow);if(this.opt.sf=="home"){this.changeTheam(this.curTheam)}};P.saveHistoryKeywords=function(e,t){var o=this;o.getHistoryKeywords(function(o){var s=-1;for(var r=0,a=o.length;r<a;++r){var n=o[r];if(n.text==t){s=r;break}}if(s>-1){o.splice(s,1)}o.unshift({text:t,href:e});if(o.length>=18){o=o.slice(0,18)}z.set(J,JSON.stringify(o))})};P.getHistoryKeywords=function(e){z.get(J,function(t){var o=[];if(t){try{o=JSON.parse(t)}catch(e){o=[]}}e&&e(o)})};P.clearHistoryKeywords=function(){z.remove(J);this.initHistory()};P.jumpToTarget=function(e,t,o,s,r){t&&this.saveHistoryKeywords(e,t);this.initHistory();var a=s?1:0,n=this.getOriginalSearch();var i={event_param:t+"_"+a+"_"+n,event_level:"2"};if(r){i=r}this.sendMping(o,i);if(W()&&/\/\/so?\.m\.jd\.com\/ware\/search\.action/.test(e)){e=e.replace(/.*[?&]keyword=([^&#]+).*[?&]searchFrom=([^&#]*)/,function(e,t,o){return"//wqs.jd.com/search/index.shtml?key="+t+"&sf="+(o||"")});e=Y(e,"sceneval","2")}window.setTimeout(function(){location.href=e},200)};P.exposeDark=function(){var e=this.getOriginalSearch();if(!window.MPing){var t=this;window.setTimeout(function(){t.sendMping("MSearch_DarkLines",{event_param:e+"_2"})},200)}else{this.sendMping("MSearch_DarkLines",{event_param:e+"_2"})}};P.clickEvent=function(e,t,o,s){if(this.opt.clickCb){try{this.opt.clickCb(e,t,o,s)}catch(e){console.log(JSON.stringify(e))}}};P.sendMping=function(e,t){if(e&&!this.opt.mManualReport){try{var o=new MPing.inputs.Click(e);if(t){o=x(o,t)}var s=new MPing;s.send(o)}catch(e){}}},P.child_indextpl=function(){var e='<div id="msContentWraper" style="display:none;">'+'<div id="msHistory" class="recent-search" style="display:none;"><div class="recent-search-head cf"><p>最近搜索</p><i id="msHistoryDel" class="garbage-pic"></i></div><div id="msHistoryTags" class="recent-search-tags"></div></div>'+'<div id="msClearToast" class="search-toast" style="display:none;"><div id="msClearFloor" class="black-floor"></div><div class="ground-toast"><div class="toast-content"> 确定要清空吗? </div><div class="toast-btn"><a class="no" id="msClearCancel">取消</a><a class="sure" id="msClearSure">确定</a></div></div></div>'+'<div id="msHotSearch" class="hot-search" style="display:none;"><div class="hot-search-head cf"><p>热门搜索</p><i id="msHotSearchReflash" class="around-pic" style="display:none;"></i></div><div id="msHotSearchTags" class="hot-search-tags"></div></div>'+'<ul id="msKeys" class="association-normal"></ul></div>';e+='<div id="msHeaderMask" class="header-mask" style="display:none;"></div><ul id="msShortcut" class="jd-header-vertical-shortcut-v2" style="position: absolute; top: 53px; right: 10px;display:none;">'+"<li>"+'<a class="J_ping" '+(!this.opt.mManualReport?'report-eventid="MCommonHead_home" report-eventparam="'+this.pageUrl+'"':"")+' href="https://m.jd.com">'+'<span class="shortcut-index" style="background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAlCAYAAAG2bMCoAAAAAXNSR0IArs4c6QAAA2hJREFUWAnNmD1IVmEUx30tizAUDKPACBIcbWqwtsB2Q9obmgJdCxsDA1sFQWiMpqZaQ1tToiV0iQbBFoWgoC+q3/96z+O53x+vL3Xg9JyP//9/nue993ov9fUV2R/MeoRzFuevQmND+qdjECUWh5Xa25AooDAcr1l0QJqWrVEjkQSoCwCs4fsqZcAUxjPFJPlG6BNsuV4iTPQCw420mq3+F1o0qU6ncx+A5W/In1svrACSv17ouMDGsO7ja651EFKcM5A1yYd9rT9OtthH2K/ApJ9VUx8bN4F6K4xmvyOE6K7SLBvh43BdrWirwBb3G7NqjU4K6ybAKwJzUH9VorxKRGOnNDplU2XEzBYhnzIBiNP6zb2pZn1hC8Vp7sbAzUJQqgF+M+bshhaFD/i3UGgZSENaLek1aKhHVgOagKR5mYvi0YB3YsIiq1y24zGF8QH28JYWMF1L53kYv8MnHiCy8jwzYYeJuHnYTA3SLfyr1kyzSQEB3U7emt8SsMecwqw2QD7ramO1NgVhJSb9Yj3mScpx1WUrvpeJAejulj3LNF1B/QiV90TR8A/3hOMVhnAmYkEt0xGQYCMuHj7IhRLZBlz747FhN+h8Fla/guC8NlSf8c+Qbbfpef757PogpWJMXddkZ+tlE8NLXQS9WDxYNfJVfA8/g9/Jw6Rr0S0COGGxWKilczV8rfSYQaVmcKRix/1Qv2Vf93EZxosNQHqAn/TkVPwolX8nf5iqtUvZpb6xnmq3Oab6UDvlliwG6vtzAf+Je1slOY9r9SbcAn6k1zuxfcRn8D3c22uSCwlgnKiOq+9N/Jk8fOMaQpP4e69O/BG/2kQM/LWYxxJMupNNdPQQj+IvgsRB8IXldiOhArB0cOl507zRXAqNAXwJ/42bKX6Mn8gldVmUbqyfnql96EmP/txtk3h7SXK2y9mN6JqHa663bV3GQfwSfrqRYo/A2ke8n8EejeiRLLu+iN/V2qMRCdmyeYn3u1iAw1dY5j2ekD2apGyefxc2noawDncdv4z7p/oH+Tv8FQcMhyXvznQSszIlMMuGq1iXK3QCPY1rfVmlaGJ5l7+qb9wyXO9exja9i/W/3lzeA/GJw57TgfnJl1j0Zd6VoXOvQEBf/GaaW24IjeD2X0aE1ZanWM1KIDRvJK3zF+VnwY9g2V+mAAAAAElFTkSuQmCC) no-repeat center center;background-size: 15px"></span>'+"<strong>首页</strong>"+"</a>"+"</li>"+'<li class="current">'+'<a class="J_ping" '+(!this.opt.mManualReport?'report-eventid="MCommonHead_CategorySearch" report-eventparam="'+this.pageUrl+'"':"")+' href="https://so.m.jd.com/category/all.html?searchFrom=header">'+'<span class="shortcut-search" style="background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAFp3oPPAAAAAXNSR0IArs4c6QAAAzJJREFUWAnVljtrVFEQx3dN8IVY+UphUmgjVkq00VLER2LrB/CDCEISQcTCTrBTCYpgtLC3UAv1A5hYWEaEKFlNNmZdf//rmbOzd+9rV1l0YPbM4z//M3vPnXtvreak3W5vOrdWI9BWQOsWl/kSbFs7qQTJz6wME6XrhiF4HHvN/Lh6xCTR6HcQIoyeDPy4U/AbxFSu3DF0RXaXEOxiSXx+ZmRIDI15BP2BvrNY4Qqwt2tVkHiDvojVOCazAeC3jbYv6FSHKAwv/bEovDNWFBna2/LRlhFkxiVfE3uluMVyVzBX0d25AEsAqtf5KaOcs4LCFZ4VkWVIIxaSjOfrgMkfxdc5S5I7JxYFg7juJMnR7PPtADVAI3UkTWK+WLCb6YOzvK0nZYDN6+hEAE52DYHYgyT3lbER02BkSecaGXiQNTC/VW3uf69KLDKwvY+XqgQ9OAizjj90XXmJc9GzQToA5U30K/oZrXYnGwkFl9A8OZfgyDZTiKYjmAi5RYvZSvx9yI3r3lkPji3rDqhYy/z0Sm4T/ZmOd/liQKa6gs4hNy2AC/WaAiDbezO/I+R2CFA2U0KfySOxXOHdq10Athjw0Swi0rpe9bJOJgCNAM46nSVyqj+k08k9YgDKX0Dz5KwwhUecAMIPLNdRPUqX0WuoZN5j+rYheJDQcDiFF7aMWSRgPpXhCvNwXA5EhbjSJCS5N2NpsQfoLaip3eqDfdobulmKB6ic8U/rOzvwj8bR52gVeQJI0/B3BdLz6IbrQM+qeyG+h3UU3Ydqgu6jypuobjp2hLNqmZJ1NRYFA/yCq1nC3p/GZPng9qL2pBbFsyxc5RgEc2IJMtBYU/vICFj7e6n5TinWW9FkzOeq2hQfMALW5bJHbhGvf5YXv8/yWfz+ld5EeVR3XeK2s/sxbznwHWf3b3Jp/Sgv6rJXYREO/YCaPK5SV4qBTR9HfrRb+PPoFDqGbkM12vqyeIimR/ti3ITkwKMdSTDgmUCfolXlO8BxzzF0mwZOpbo9PfQm/IY0cxD95pq64vNDt2lEH5YfXUM3/JwPtSG+OddQvSztVXB4qA38V5vpy0pv413/QNeNXxjWvZIdtAPeAAAAAElFTkSuQmCC) no-repeat center center;background-size: 15px"></span>'+"<strong>分类搜索</strong>"+"</a>"+"</li>"+"<li>"+'<a class="J_ping" '+(!this.opt.mManualReport?'report-eventid="MCommonHead_Cart" report-eventparam="'+this.pageUrl+'"':"")+' href="https://p.m.jd.com/cart/cart.action">'+'<span class="shortcut-cart" style="background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAkCAYAAAF9MBMNAAAAAXNSR0IArs4c6QAAAvNJREFUWAnNWDtOHEEQ3TWWFwksITniADiFBB/AOaEtgSUOQYhDG0JSDoGELYGPQL6k+AAOWGmDxRKgxetXreqe6u6q+e14cUtDd1W9eq96aqYZ6M1ms+NeMvpkIzBL/LnzJSO2LPSEqSYqnxNiRC7m1cE9zUrqY7zwCDL8OsxIy3YWgnKh1s4AigUZ+H7KxGT9NrFLTKLFeCyBFCFCFpa+8jW6+oA/oiRlDF06Aps6j2txvBGAjzQw/NPIT3KRgw3v9w+Lc3unltDOlzJGNoz0lmy1k1GySAkjPBtYHztP/R9fIlrkfaXcyFnTYM39DM6BRttGzinlZWTkYMIbNWg4OedUDSPomqQGFSfw+0SohAoX4o8EajCqjw2QjZlwu5AqVlbcv6YFct4VlB64EpqqSy8R7BMZ4q88Rj1XfbDuDNLWD3OmAbJNXFHLYcpbQOGycR+agO1dkwLQjd4KUdUgkAnnB7+GwIDuYdUA/ofPCTPvIZwqIVCx4LzbCAbnDQUiZw2DyQ4jKJyNO4qcVSZbTcmyjkYAxQDRZyJTQuFYqt1R8Iw8mdZNEgkdVRVj5xuYl7GLLVJpMd5bZE1/ydT73FDVmjqxzW3e6ljLrYpHOQBPmExteVU8JXvHZFZlapwOR/qajZ/egpq+hV7jRb8vXM+8QsHnvFOaPj1XOdZLdSYKavKCibT5l/nfDeDE3Rpg+o1rCdcfXCtpa4EpexyQMve4Mxkg/g2XHwtpLcTcocui+iccVQzArq8M83dzFx0GoOMOcdbdMKkBWMY1ZeAT2Sa4gwD43Tcq611UUgK4sNZCa8iF0aT/opEVA7QnEv5Za6kYoTOUNZhrJCyktdC5FMXlf2lZFSJJtnbPwrX1g39DFDaSPNYhLDHyQP4oAx2tDwTPiVj31ENYArArekvpwI3+iyAxHa2fwLOGw94+fDsS6oSm8s6lKriT6/DtsP8CO/2VYsrsefNNbhBf4UrHlZmQBJDYKL/OC5FILM78r9v6Fx346V9Ef2tUAAAAAElFTkSuQmCC) no-repeat center center;background-size: 15px"></span>'+"<strong>购物车</strong>"+"</a>"+"</li>"+"<li>"+'<a class="J_ping" '+(!this.opt.mManualReport?'report-eventid="MCommonHead_MYJD" report-eventparam="'+this.pageUrl+'"':"")+' href="https://home.m.jd.com">'+'<span class="shortcut-home" style="background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAjCAYAAAFgNSO1AAAAAXNSR0IArs4c6QAAA8VJREFUWAm9mF9ojlEcx/duM2PZFnZjqV0oRSLZFe3CBVfcTdxQUtxYcYXQ8ifKJZKiGCEXXGBlKDUpiuRKLS2WEuVPW2hmr8/v2Tnv+zvPc877Ps/el199d35/vr/vOc/7vOect9XUGMvn89esH40k1jgJHVCcLMQET22An68BgzaRGCmOJJKSiFptxQlM9aAqtlnfGX1decugWFyzTcpIIfGkCSVDbJRCzE5asZwh/cnlcnU2qUcaFxOv1DmZXlR/gW1OgaDeJigex29FWcgzQB4/mtFyolEKOkH4WMe1Okjlo3ACnBUyYzS1t5Hid+BYgijVRHJKuZgPkWyjrad5mNW2yTui1CdqAWvxNpH0ziwi1NrlxfiM2jcoD0KiTh5ijxF08jqgvq8cR/OjPUbDIyepAhHDgnVFLbo03Ija/H9ai8wSHr27Vf8WH5V6HRg0vOBubjeEAZ9IKEdPrekbL3BILDLJjkIyo0N/tC2iNoJjQPZyRYbGWFkBSJvAMBgHt8Ccsk1xAk0zQcj64/ySsVKZrYnke03tss4HfciXTEPyDKSL2hWpBwV0wQgN6VzcN5zN8bz3IIB0P070xO49ACEktt7THE+9iCcSMY9gz7rKPzNRN5+JDKG32ZdYRSiBiO9ytXM8DPUl8nTst10lxp/UmhPNOgFBto3YK9Cga9Ynv0EIxo7avDPaKmOHUwgE8O6ZnnMOhaS9Yb2rccgqoC/aDYzLojROFxBL/PRRfUGXvh/SbMUm8SeC7DIFeltEDOuy36nuMj0ly1Na+eEczigXcfZDT8mj0UO4XKXSuzRvBe9BOfsMQS780BmQftJSTJkA3AXaPhAcACtAM2gCS8AeMAS0PSNoLDXHtGqIyk1rN5xM6N9MHnW4O6VBWelffR6NYApR+cn7VYl3BsmBAr0LwYTRkHFegJotjdB2IyrD9WzdRTa9p5TO4WIl7KX5oqa7f8Nz2Iq+r6qjydPKdTOmnrrS1yqH4AK74opHxJaC32qBlWyItRUvKC7AwupBv1qguFmOkufwm+K6VYkRngv2gjcgq72j4RCo6uvsRPCtZyVfyMn1vAOsAm2gAcinKw8hh7LcIhfARxA3ya2b1qdGY29MbZRYDlO94zJr098NPgFt5wnKnxqQNgLZTdYGcJxfmJlX5GlAUz7hq3YSM+7yUKdSEG4q8gj+/CC5SgXmmAVeq3mf4Ltvh8QdRbhYpblTyzD3ETX/y0Ijyej/E6Z4u1D4zw7zn1ELPB1NT8Ke/nIhp/s3xT9YOHPXATkFrNX+BSB8ooU9mPUcAAAAAElFTkSuQmCC) no-repeat center center;background-size: 15px"></span>'+"<strong>我的京东</strong>"+"</a>"+"</li>"+"<li>"+'<a class="J_ping" '+(!this.opt.mManualReport?'report-eventid="MCommonHead_FootPrint" report-eventparam="'+this.pageUrl+'"':"")+' href="https://home.m.jd.com/myJd/history/wareHistory.action?functionId=liulanjilu">'+'<span class="shortcut-footprint" style="background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAoCAYAAAEDGXMMAAAAAXNSR0IArs4c6QAABMZJREFUWAmlmF+oFVUUxu+RMMoe0ohSQS4ZmBAU9P9BTAkFq5eghKDo3XpM0CL6A2VZcoUEIYgIIgp6sfIhIuuhMiJ7KpMsiEhvD964GZWWnn7fPnvtWXvPPnPn3hZ8Z6/9fd9aM3NmZs+cMzERYzgcnrB8kRKInQy/xHyoUeSdISk/EEJVyTdzv4HAQihuAc82tphJsd0YbRrBtrAj2XGdkFUhshyT0UQMK400s83DWCNrnJnTvnSZpL2nD2JgleuYHNCEcRdYHAT/ARkimpTLGI44+SDOSYmmd0mPgNBNPDETzCTa5HmrJN8N0rdrppyAxfOpFSUT5MUZOTI+nHGYPgZZR6bTmUmTiikU2RmvFWyFXFcT1OwwOJt1ZaLD93HOqh0ZbgLm+qJDmCeNsAeiloYkFgmGxUBnbJckxikwA6qnewtCV8xaf2eaMi6MUUiHlolxgmd59H1f07Wbg2i4p2pwJL7roneVo5sUcWU0aPgWjO6BxpKy6DuYiHEJxkXR/HjNE7Xsyqv5dKiro3ltzRC1z2taxmHcFs3ZqYVbE/nOk1I2W0bRr7HQhjcyk5/g0EWpCy3dE+TZxef9rRxzWEYYLUIjJmoawopszhiuauPDbexEpWPvJ+cLnq4mYZlMBpfQxFZEHaqge2tKe/IYsAjfPBNdM0+DQ+A78A7Y4PqpTg1CeD7ksD9FbdzwkIyIustDhEL7gAmLEuMrxtkINwnOAMVu47MR4ZEgD4dbMqGY4LGz1l5CEf9Qk6KmOpWPeLslQs5KaQkVQj5FS4K7PyjD4astsSDw6Yy1m8gHf1xijPuK2jRFf0meRJQJ2q0yxPi61DVHu1d6Tcs4PFrtqkZoWzYvUlH7NDWtTjdpK1semXCFdzW5uVXaELcrHQwGZxuqkulQiOpSOJKaQ+3aE7WeLPvT4Hjk1pdaa475YNyi7qe3wFdxrmF/q2AcgflJV6j0NLim6kfYCc6DMrR06m05C7j0FuEKsiUTXouWLWK6aZVnT5CsqSYYWm8gcGVkqyairQjely29fTzlzuhE31iSlXnpmcTzPDgZoXwS+HjdT2Je4xobR6CXvPJJ5o9YWnpENpULz+i3128g5s1rmTYI7Pms06DcHq+XkL8Iyoc91Nj4DeU5cGW523Dp+eWqZ8a+cakBxm0ML5fNmH8DPgQ/gz/BX+BysBrcAMrTCjWxj5Uk/A6gry7kF8CDEgidvu0hKz8wLwXTwEIPmNtK31xzataCH6wJo+7YO+aqy3QKvnQNXsvEBUzotdn1U3p3rzYYlxSF1/cqnMNEz0ddX92F/YKiT1zhR+Sd11afrvS4ANirkdpv7lOnC1dvdEdU4eJH8geA1qYFBbV+gd07ryYUXwreBLX4DLL+Q2nMVvDbDwv1OzrG1o+mwSZwWJ1cbOpXHZaKja7u7751nT4avu+aPtNpdiI1N7k6pcuc3PlO5X1l7h8Px0qxY77GabMsgqP/XRw5r5Sj2eqO7nfyXhc0Pv14P+pq98xrwzUzzZ5wDT+oeUoO/1XglKv7ovQsaE7Dq11TpXoFvKJsBqdHyg6gb8/HU6X3f83pvAIc81uYI/8HfTvoXDw7xT57zAYuxHcXuBZcBv4F0yA82blIz5D3iv8AygYvrfqZyYcAAAAASUVORK5CYII=) no-repeat center center;background-size: 15px"></span>'+"<strong>浏览记录</strong>"+"</a>"+"</li>"+"</ul>";return this.child_searchtpl()+e};P.child_shoptpl=function(e){return'<li key="'+e.keyword+'" mtype="shop" ind="'+e.ind+'"><a href="javascript:void(0);"><i class="shop-pic"></i><span class="association-shop-name">"'+e.keyword+'"店铺</span></a></li>'};P.child_seltpl=function(e){var t=['<li key="'+e.key+'" mtype="key" ind="'+e.ind+'"><a href="javascript:void(0);">'];t.push('<span class="association-product-name">'+e.keywordStr+"</span>");if(e.tag&&e.tag.length>0){for(var o=0,s=e.tag.length;o<s;++o){var r=e.tag[o];t.push('<span class="association-product-btn" key="'+r.tse+'" assword="'+e.key+'" mtype="subkey" ind="'+e.ind+'" subind="'+(o+1)+'">'+r.tsh+"</span>")}}t.push("</a></li>");return t.join("")};P.child_histpl=function(e){var t='<span tourl="'+e.href+'" ind="'+e.ind+'"><a href="javascript:void(0);">'+D(e.text)+"</a></span>";return t};P.child_hottpl=function(e){var t='<span key="'+e.hotWord+'" ind="'+e.ind+'"><a href="javascript:void(0);"><i class="hot-search-move '+(e.ind<=3?"hot-search-red":"")+'">'+e.hotWord+"</i></a></span>";return t};P.child_searchtpl=function(){var e='<div class="mjd-header">'+'<div class="m_common_container">'+'<div class="m_cc_header_inner">'+'<header class="jd-header">'+'<div class="jd-header-new-bar">'+'<div id="msCancelBtn" '+(!this.opt.mManualReport?'report-eventid="MCommonHead_Back" report-eventparam="'+this.pageUrl+'"':"")+' class="jd-header-icon-back J_ping"><span></span></div>'+'<div class="jd-header-new-title"></div>'+'<div id="msShortcutLogin" class="jd-header-icon-new-shortcut-text J_ping" style="display:none;"><span>登录</span></div>'+'<div id="msShortcutMenu" '+(!this.opt.mManualReport?'report-eventid="MCommonHead_NavigateButton" report-eventparam="'+this.pageUrl+'"':"")+' class="jd-header-icon-new-shortcut J_ping" style="display:none;"><span></span></div>'+"</div>"+"</header>"+"</div>"+'<div class="m-common-header-search">'+'<form action="/search/search.action" class="jd-header-search-form">'+'<div class="jd-header-search-box" id="msSearchBox">'+'<i id="search-input-left-jd" class="jd-header-icon-jd"></i>'+'<i id="search-input-left-icon" class="jd-header-icon-fdj"></i>'+'<div class="jd-header-search-input">'+'<input value="'+this.opt.initKeyword+'" maxlength="20" name="keyword" id="msKeyWord" type="text" cleardefault="no" autocomplete="off" placeholder="搜索商品/店铺" class="hilight2">'+'<input name="catelogyList" type="text" value="" style="display:none;">'+'<div class="head-input-icon J_ping" id="msSearchTab" report-eventid="MSearch_SearchTab" style="display:none;"></div>'+"</div>"+'<a href="javascript:void(0);" class="jd-header-icon-close" id="msSearchClearBtn" style="display:none;"></a>'+"</div>"+'<a href="javascript:void(0)" style="display:'+(this.opt.initHideSbtn?"none":"block")+';" id="msSearchBtn" class="jd-header-icon-search1">'+"<span>搜索</span>"+"</a>"+"</form>"+"</div>"+"</div>"+"</div>";return e};P.changeTheam=function(e){switch(e){case"home_transparent":this.opt.smartboxBlock.className="search-land main-page2";break;case"home_normal":this.opt.smartboxBlock.className="search-land main-page";break;default:this.opt.smartboxBlock.className="search-land";break}e&&(this.curTheam=e)};P.setLogin=function(e){this.opt.isLogin=e;if(!this.onShow){if(e){q(this.doms.msShortcutLogin,"none");q(this.doms.msShortcutMenu,"")}else{q(this.doms.msShortcutLogin,"");q(this.doms.msShortcutMenu,"none")}}};function W(){var e=0,t=F("visitkey"),o=(t||"0").substr(-2),s=parseInt(o,10);if(typeof window.smartboxGrayMtoStatic!="undefined"){e=window.smartboxGrayMtoStatic}return e==99||e&&e>=s}return P});